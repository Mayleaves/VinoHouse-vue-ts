{"remainingRequest":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\src\\views\\setmeal\\components\\AddDish.vue?vue&type=style&index=0&id=d17ba2f4&lang=scss&scoped=true&","dependencies":[{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\src\\views\\setmeal\\components\\AddDish.vue","mtime":1751204465535},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.addDish {\r\n  .el-checkbox__label {\r\n    width: 100%;\r\n  }\r\n  .empty-box {\r\n    margin-top: 50px;\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  .header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 10px;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .title {\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    color: #333;\r\n  }\r\n\r\n  .search-input {\r\n    width: 240px;\r\n  }\r\n\r\n  .borderNone {\r\n    border: none !important;\r\n  }\r\n  span,\r\n  .tit {\r\n    color: #333;\r\n  }\r\n  .leftCont {\r\n    display: flex;\r\n    border-right: solid 1px #efefef;\r\n    width: 60%;\r\n    padding: 15px;\r\n    .tabBut {\r\n      width: 110px;\r\n      font-weight: bold;\r\n      border-right: solid 2px #f4f4f4;\r\n      span {\r\n        display: block;\r\n        text-align: center;\r\n        cursor: pointer;\r\n        position: relative;\r\n      }\r\n    }\r\n    .act {\r\n      border-color: #ffc200 !important;\r\n      color: #ffc200 !important;\r\n    }\r\n    .act::after {\r\n      content: ' ';\r\n      display: inline-block;\r\n      background-color: #ffc200;\r\n      width: 2px;\r\n      height: 40px;\r\n      position: absolute;\r\n      right: -2px;\r\n    }\r\n    .tabList {\r\n      flex: 1;\r\n      padding: 15px;\r\n      height: 400px;\r\n      overflow-y: scroll;\r\n      .table {\r\n        border: solid 1px #f4f4f4;\r\n        border-bottom: solid 1px #f4f4f4;\r\n        .items {\r\n          border-bottom: solid 1px #f4f4f4;\r\n          padding: 0 10px;\r\n          display: flex;\r\n          .el-checkbox,\r\n          .el-checkbox__label {\r\n            width: 100%;\r\n          }\r\n          .item {\r\n            display: flex;\r\n            padding-right: 20px;\r\n            span {\r\n              display: inline-block;\r\n              text-align: center;\r\n              flex: 1;\r\n              font-weight: normal;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .ritCont {\r\n    width: 40%;\r\n    .tit {\r\n      margin: 0 15px;\r\n      font-weight: bold;\r\n    }\r\n    .items {\r\n      height: 338px;\r\n      padding: 4px 15px;\r\n      overflow: scroll;\r\n    }\r\n    .item {\r\n      box-shadow: 0px 1px 4px 3px rgba(0, 0, 0, 0.03);\r\n      display: flex;\r\n      text-align: center;\r\n      padding: 0 10px;\r\n      margin-bottom: 20px;\r\n      border-radius: 6px;\r\n      color: #818693;\r\n      span:first-child {\r\n        text-align: left;\r\n        color: #20232a;\r\n        flex: 70%;\r\n      }\r\n      .price {\r\n        display: inline-block;\r\n        flex: 70%;\r\n        text-align: left;\r\n      }\r\n      .del {\r\n        cursor: pointer;\r\n        img {\r\n          position: relative;\r\n          top: 5px;\r\n          width: 20px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["AddDish.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddDish.vue","sourceRoot":"src/views/setmeal/components","sourcesContent":["<template>\r\n  <div class=\"addDish\">\r\n    <div class=\"header\">\r\n      <div class=\"title\">添加菜品</div>\r\n      <el-input\r\n        v-model=\"searchValue\"\r\n        placeholder=\"请输入菜品名称进行搜索\"\r\n        @keyup.enter.native=\"handleSearch\"\r\n        clearable\r\n        class=\"search-input\"\r\n      >\r\n        <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i>\r\n      </el-input>\r\n    </div>\r\n    <div class=\"leftCont\">\r\n      <div v-show=\"searchValue.trim() === ''\" class=\"tabBut\">\r\n        <span\r\n          v-for=\"(item, index) in dishType\"\r\n          :key=\"index\"\r\n          :class=\"{ act: index === keyInd }\"\r\n          @click=\"checkTypeHandle(index, item.id)\"\r\n        >{{ item.name }}</span>\r\n      </div>\r\n      <div class=\"tabList\">\r\n        <div class=\"table\" :class=\"{ borderNone: !dishList.length }\">\r\n          <div v-if=\"dishList.length === 0\" style=\"padding-left: 10px\">\r\n            <Empty />\r\n          </div>\r\n          <el-checkbox-group\r\n            v-if=\"dishList.length > 0\"\r\n            v-model=\"checkedList\"\r\n            @change=\"checkedListHandle\"\r\n          >\r\n            <div\r\n              v-for=\"(item, index) in dishList\"\r\n              :key=\"item.name + item.id\"\r\n              class=\"items\"\r\n            >\r\n              <el-checkbox :key=\"index\" :label=\"item.name\">\r\n                <div class=\"item\">\r\n                  <span style=\"flex: 3; text-align: left\">{{ item.dishName }}</span>\r\n                  <span>{{ item.status === 0 ? '停售' : '在售' }}</span>\r\n                  <span>{{ (Number(item.price)).toFixed(2) * 100 / 100 }}</span>\r\n                </div>\r\n              </el-checkbox>\r\n            </div>\r\n          </el-checkbox-group>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"ritCont\">\r\n      <div class=\"tit\">已选菜品({{ checkedListAll.length }})</div>\r\n      <div class=\"items\">\r\n        <div\r\n          v-for=\"(item, ind) in checkedListAll\"\r\n          :key=\"ind\"\r\n          class=\"item\"\r\n        >\r\n          <span>{{ item.dishName || item.name }}</span>\r\n          <span class=\"price\">￥ {{ (Number(item.price)).toFixed(2) * 100 / 100 }} </span>\r\n          <span class=\"del\" @click=\"delCheck(item.name)\">\r\n            <img src=\"./../../../assets/icons/btn_clean@2x.png\" alt=\"\">\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\r\nimport { getCategoryList, queryDishList } from '@/api/dish';\r\nimport Empty from '@/components/Empty/index.vue';\r\n\r\n@Component({\r\n  name: 'selectInput',\r\n  components: {\r\n    Empty,\r\n  },\r\n})\r\nexport default class extends Vue {\r\n  @Prop({ default: '' }) private value!: number;\r\n  @Prop({ default: [] }) private checkList!: any[];\r\n  @Prop({ default: '' }) private seachKey!: string;\r\n\r\n  private searchValue: string = '';\r\n  private originalDishList: any[] = [];\r\n\r\n  private dishType: [] = [];\r\n  private dishList: [] = [];\r\n  private allDishList: any[] = [];\r\n  private dishListCache: any[] = [];\r\n  private keyInd = 0;\r\n  private checkedList: any[] = [];\r\n  private checkedListAll: any[] = [];\r\n  private ids: any = new Set();\r\n\r\n  created() {\r\n    this.init();\r\n  }\r\n\r\n  @Watch('searchValue')\r\n  private searchValueChange(value: string) {\r\n    if (value.trim()) {\r\n      this.handleSearch();\r\n    } else {\r\n      this.dishList = [...this.originalDishList];\r\n    }\r\n  }\r\n\r\n  public init() {\r\n    this.getDishType();\r\n    this.checkedList = this.checkList.map((it: any) => it.name);\r\n    this.checkedListAll = this.checkList.reverse();\r\n  }\r\n\r\n  private handleSearch() {\r\n    if (!this.searchValue.trim()) return;\r\n\r\n    const filteredList = this.originalDishList.filter((item) =>\r\n      item.name.includes(this.searchValue) || item.dishName.includes(this.searchValue)\r\n    );\r\n\r\n    this.dishList = filteredList;\r\n  }\r\n\r\n  public getDishType() {\r\n    getCategoryList({ type: 1 }).then((res) => {\r\n      if (res && res.data && res.data.code === 1) {\r\n        this.dishType = res.data.data;\r\n        this.getDishList(res.data.data[0].id);\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    });\r\n  }\r\n\r\n  private getDishList(id: number) {\r\n    queryDishList({ categoryId: id }).then((res) => {\r\n      if (res && res.data && res.data.code === 1) {\r\n        if (res.data.data.length === 0) {\r\n          this.dishList = [];\r\n          this.originalDishList = [];\r\n          return;\r\n        }\r\n\r\n        let newArr = res.data.data;\r\n        newArr.forEach((n: any) => {\r\n          n.dishId = n.id;\r\n          n.copies = 1;\r\n          n.dishName = n.name;\r\n        });\r\n\r\n        this.dishList = newArr;\r\n        this.originalDishList = [...newArr];\r\n\r\n        if (!this.ids.has(id)) {\r\n          this.allDishList = [...this.allDishList, ...newArr];\r\n        }\r\n        this.ids.add(id);\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    });\r\n  }\r\n\r\n  private getDishForName(name: any) {\r\n    queryDishList({ name }).then((res) => {\r\n      if (res && res.data && res.data.code === 1) {\r\n        let newArr = res.data.data;\r\n        newArr.forEach((n: any) => {\r\n          n.dishId = n.id;\r\n          n.dishName = n.name;\r\n        });\r\n        this.dishList = newArr;\r\n        this.originalDishList = [...newArr];\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    });\r\n  }\r\n\r\n  private checkTypeHandle(ind: number, id: any) {\r\n    this.keyInd = ind;\r\n    this.searchValue = '';\r\n    this.getDishList(id);\r\n  }\r\n\r\n  private checkedListHandle(value: [string]) {\r\n    this.checkedListAll.reverse();\r\n\r\n    const list = this.allDishList.filter((item: any) => {\r\n      let data;\r\n      value.forEach((it: any) => {\r\n        if (item.name === it) {\r\n          data = item;\r\n        }\r\n      });\r\n      return data;\r\n    });\r\n\r\n    const dishListCat = [...this.checkedListAll, ...list];\r\n    let arrData: any[] = [];\r\n    this.checkedListAll = dishListCat.filter((item: any) => {\r\n      let allArrDate;\r\n      if (arrData.length === 0) {\r\n        arrData.push(item.name);\r\n        allArrDate = item;\r\n      } else {\r\n        const st = arrData.some((it) => item.name === it);\r\n        if (!st) {\r\n          arrData.push(item.name);\r\n          allArrDate = item;\r\n        }\r\n      }\r\n      return allArrDate;\r\n    });\r\n\r\n    if (value.length < arrData.length) {\r\n      this.checkedListAll = this.checkedListAll.filter((item: any) => {\r\n        if (value.some((it) => it === item.name)) {\r\n          return item;\r\n        }\r\n      });\r\n    }\r\n\r\n    this.$emit('checkList', this.checkedListAll);\r\n    this.checkedListAll.reverse();\r\n  }\r\n\r\n  open(done: any) {\r\n    this.dishListCache = JSON.parse(JSON.stringify(this.checkList));\r\n  }\r\n\r\n  close(done: any) {\r\n    this.checkList = this.dishListCache;\r\n  }\r\n\r\n  private delCheck(name: any) {\r\n    const index = this.checkedList.findIndex((it) => it === name);\r\n    const indexAll = this.checkedListAll.findIndex((it: any) => it.name === name);\r\n\r\n    this.checkedList.splice(index, 1);\r\n    this.checkedListAll.splice(indexAll, 1);\r\n    this.$emit('checkList', this.checkedListAll);\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.addDish {\r\n  .el-checkbox__label {\r\n    width: 100%;\r\n  }\r\n  .empty-box {\r\n    margin-top: 50px;\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  .header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 10px;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .title {\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    color: #333;\r\n  }\r\n\r\n  .search-input {\r\n    width: 240px;\r\n  }\r\n\r\n  .borderNone {\r\n    border: none !important;\r\n  }\r\n  span,\r\n  .tit {\r\n    color: #333;\r\n  }\r\n  .leftCont {\r\n    display: flex;\r\n    border-right: solid 1px #efefef;\r\n    width: 60%;\r\n    padding: 15px;\r\n    .tabBut {\r\n      width: 110px;\r\n      font-weight: bold;\r\n      border-right: solid 2px #f4f4f4;\r\n      span {\r\n        display: block;\r\n        text-align: center;\r\n        cursor: pointer;\r\n        position: relative;\r\n      }\r\n    }\r\n    .act {\r\n      border-color: #ffc200 !important;\r\n      color: #ffc200 !important;\r\n    }\r\n    .act::after {\r\n      content: ' ';\r\n      display: inline-block;\r\n      background-color: #ffc200;\r\n      width: 2px;\r\n      height: 40px;\r\n      position: absolute;\r\n      right: -2px;\r\n    }\r\n    .tabList {\r\n      flex: 1;\r\n      padding: 15px;\r\n      height: 400px;\r\n      overflow-y: scroll;\r\n      .table {\r\n        border: solid 1px #f4f4f4;\r\n        border-bottom: solid 1px #f4f4f4;\r\n        .items {\r\n          border-bottom: solid 1px #f4f4f4;\r\n          padding: 0 10px;\r\n          display: flex;\r\n          .el-checkbox,\r\n          .el-checkbox__label {\r\n            width: 100%;\r\n          }\r\n          .item {\r\n            display: flex;\r\n            padding-right: 20px;\r\n            span {\r\n              display: inline-block;\r\n              text-align: center;\r\n              flex: 1;\r\n              font-weight: normal;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .ritCont {\r\n    width: 40%;\r\n    .tit {\r\n      margin: 0 15px;\r\n      font-weight: bold;\r\n    }\r\n    .items {\r\n      height: 338px;\r\n      padding: 4px 15px;\r\n      overflow: scroll;\r\n    }\r\n    .item {\r\n      box-shadow: 0px 1px 4px 3px rgba(0, 0, 0, 0.03);\r\n      display: flex;\r\n      text-align: center;\r\n      padding: 0 10px;\r\n      margin-bottom: 20px;\r\n      border-radius: 6px;\r\n      color: #818693;\r\n      span:first-child {\r\n        text-align: left;\r\n        color: #20232a;\r\n        flex: 70%;\r\n      }\r\n      .price {\r\n        display: inline-block;\r\n        flex: 70%;\r\n        text-align: left;\r\n      }\r\n      .del {\r\n        cursor: pointer;\r\n        img {\r\n          position: relative;\r\n          top: 5px;\r\n          width: 20px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}