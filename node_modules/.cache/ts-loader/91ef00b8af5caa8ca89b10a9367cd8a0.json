{"remainingRequest":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\babel-loader\\lib\\index.js!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\src\\views\\setmeal\\index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\src\\views\\setmeal\\index.vue","mtime":1751207762492},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _category = require(\"@/api/category\");\n\nvar _setMeal = require(\"@/api/setMeal\");\n\nvar _default = {\n  // 模型数据\n  data: function data() {\n    return {\n      name: '',\n      page: 1,\n      pageSize: 10,\n      total: 0,\n      records: [],\n      status: '',\n      categoryId: '',\n      categoryList: [],\n      multipleSelection: '',\n      checkList: [],\n      statusArr: [{\n        value: '0',\n        label: '停售'\n      }, {\n        value: '1',\n        label: '启售'\n      }]\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // 动态填充下拉框中的分类数据\n    (0, _category.getCategoryByType)({\n      type: 2\n    }).then(function (res) {\n      if (res.data.code === 1) {\n        _this.categoryList = res.data.data;\n      }\n    }); // 页面加载完成后查询套分页数据\n\n    this.pageQuery();\n  },\n  methods: {\n    // 分页查询\n    pageQuery: function pageQuery() {\n      var _this2 = this;\n\n      // 准备请求参数\n      var params = {\n        name: this.name,\n        page: this.page,\n        pageSize: this.pageSize,\n        status: this.status,\n        categoryId: this.categoryId\n      }; // 调用 Ajax 请求\n\n      (0, _setMeal.getSetmealPage)(params).then(function (res) {\n        if (res.data.code === 1) {\n          _this2.total = res.data.data.total; // res.data：后端返回数据中的 data；res.data.data：模型数据\n\n          _this2.records = res.data.data.records;\n        }\n      }).catch(function (err) {\n        _this2.$message.error('请求出错了：' + err.message);\n      });\n    },\n    // 删除套餐\n    handleDelete: function handleDelete(type, id) {\n      var _this3 = this;\n\n      if (type === '批量' && id === null) {\n        if (this.checkList.length === 0) {\n          return this.$message.error('请选择删除对象');\n        }\n      } // 弹出确认提示框\n\n\n      this.$confirm('确认要删除当前套餐吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        (0, _setMeal.deleteSetmeal)(type === '批量' ? _this3.checkList.join(',') : id).then(function (res) {\n          if (res && res.data && res.data.code === 1) {\n            _this3.$message.success('删除成功！');\n\n            _this3.pageQuery();\n          } else {\n            _this3.$message.error(res.data.msg);\n          }\n        }).catch(function (err) {\n          _this3.$message.error('请求出错了：' + err.message);\n        });\n      }).catch(function () {\n        _this3.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    // 处理选择变化\n    handleSelectionChange: function handleSelectionChange(selection) {\n      // 更新选中列表\n      this.checkList = selection.map(function (item) {\n        return item.id;\n      });\n    },\n    // 新增/修改套餐，跳转到新增页面（组件）\n    handleAdd: function handleAdd(st) {\n      if (st === 'add') {\n        // 新增\n        this.$router.push('/setmeal/add');\n      } else {\n        // 修改\n        this.$router.push({\n          path: '/setmeal/add',\n          query: {\n            id: st\n          }\n        });\n      }\n    },\n    // 启售、停售套餐\n    statusHandle: function statusHandle(row) {\n      var _this4 = this;\n\n      // 弹出确认提示框\n      this.$confirm('确认要修改当前套餐售卖状态吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var p = {\n          id: row.id,\n          status: !row.status ? 1 : 0 // 0 是 true，1 是 false\n\n        };\n        (0, _setMeal.enableOrDisableSetmeal)(p).then(function (res) {\n          if (res.data.code === 1) {\n            _this4.$message.success('套餐售卖状态修改成功！');\n\n            _this4.pageQuery();\n          }\n        });\n      }).catch(function () {\n        _this4.$message({\n          type: 'info',\n          message: '已取消修改'\n        });\n      });\n    },\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.pageQuery();\n    },\n    handleCurrentChange: function handleCurrentChange(page) {\n      this.page = page;\n      this.pageQuery();\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\src\\views\\setmeal\\index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {getCategoryByType} from '@/api/category'\r\nimport {getSetmealPage, enableOrDisableSetmeal, deleteSetmeal} from '@/api/setMeal'\r\nexport default {\r\n  // 模型数据\r\n  data() {\r\n    return {\r\n      name: '',               // 套餐姓名，对应 v-model=\"name\"（双向绑定）\r\n      page: 1,                // 页码\r\n      pageSize: 10,           // 每页记录数\r\n      total: 0,               // 总记录数\r\n      records: [],            // 当前页要展示的数据集合\r\n      status: '',             // 售卖状态\r\n      categoryId: '',         // 分类 Id\r\n      categoryList: [],       // 分类数据\r\n      multipleSelection: '',  // 当前表格选中的多个元素\r\n      checkList: [],          // 存储选中的记录\r\n      statusArr: [{\r\n        value: '0',\r\n        label: '停售'\r\n      }, {\r\n        value: '1',\r\n        label: '启售'\r\n      }]\r\n    }\r\n  },\r\n  created() {\r\n    // 动态填充下拉框中的分类数据\r\n    getCategoryByType({type: 2}).then(res => {\r\n      if(res.data.code === 1) {\r\n        this.categoryList = res.data.data\r\n      }\r\n    })\r\n    // 页面加载完成后查询套分页数据\r\n    this.pageQuery()\r\n  },\r\n  methods: {\r\n    // 分页查询\r\n    pageQuery() {\r\n      // 准备请求参数\r\n      const params = { name: this.name, page: this.page, pageSize: this.pageSize, status: this.status, categoryId: this.categoryId}\r\n      // 调用 Ajax 请求\r\n      getSetmealPage(params).then(res => {\r\n        if (res.data.code === 1) {\r\n          this.total = res.data.data.total  // res.data：后端返回数据中的 data；res.data.data：模型数据\r\n          this.records = res.data.data.records\r\n        }\r\n      }).catch(err => {\r\n        this.$message.error('请求出错了：' + err.message)\r\n      })\r\n    },\r\n    // 删除套餐\r\n    handleDelete(type: string, id: string){\r\n      if (type === '批量' && id === null) {\r\n        if (this.checkList.length === 0) {\r\n          return this.$message.error('请选择删除对象')\r\n        }\r\n      }\r\n      // 弹出确认提示框\r\n      this.$confirm('确认要删除当前套餐吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteSetmeal(type === '批量' ? this.checkList.join(',') : id)\r\n          .then(res => {\r\n            if (res && res.data && res.data.code === 1) {\r\n              this.$message.success('删除成功！')\r\n              this.pageQuery()\r\n            } else {\r\n              this.$message.error(res.data.msg)\r\n            }\r\n          }).catch(err => {\r\n            this.$message.error('请求出错了：' + err.message)\r\n          })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n    },\r\n    // 处理选择变化\r\n    handleSelectionChange(selection){\r\n      // 更新选中列表\r\n      this.checkList = selection.map(item => item.id)\r\n    },\r\n    // 新增/修改套餐，跳转到新增页面（组件）\r\n    handleAdd(st: string) {\r\n      if (st === 'add') {  // 新增\r\n        this.$router.push('/setmeal/add')\r\n      } else {  // 修改\r\n        this.$router.push({\r\n          path: '/setmeal/add',\r\n          query: { id: st }\r\n        })\r\n      }\r\n    },\r\n    // 启售、停售套餐\r\n    statusHandle(row){\r\n      // 弹出确认提示框\r\n      this.$confirm('确认要修改当前套餐售卖状态吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        const p = {\r\n          id: row.id,\r\n          status: !row.status ? 1: 0  // 0 是 true，1 是 false\r\n        }\r\n        enableOrDisableSetmeal(p).then(res => {\r\n          if(res.data.code === 1){\r\n            this.$message.success('套餐售卖状态修改成功！')\r\n            this.pageQuery()\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消修改'\r\n        });\r\n      });\r\n    },\r\n    handleSizeChange(pageSize){\r\n      this.pageSize = pageSize\r\n      this.pageQuery()\r\n    },\r\n    handleCurrentChange(page){\r\n      this.page = page\r\n      this.pageQuery()\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}]}