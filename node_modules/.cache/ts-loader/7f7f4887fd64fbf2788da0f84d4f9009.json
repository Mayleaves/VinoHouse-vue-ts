{"remainingRequest":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\babel-loader\\lib\\index.js!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\src\\views\\employee\\index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\src\\views\\employee\\index.vue","mtime":1751250487440},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _employee = require(\"@/api/employee\");\n\nvar _default = {\n  name: \"EmployeeSearchForm\",\n  // 模型数据\n  data: function data() {\n    return {\n      name: '',\n      page: 1,\n      pageSize: 10,\n      total: 0,\n      records: [],\n      currentUser: {} // 存储当前登录用户\n\n    };\n  },\n  created: function created() {\n    // 从 localStorage 获取当前用户\n    var user = localStorage.getItem('currentUser');\n    this.currentUser = user ? JSON.parse(user) : {};\n    this.pageQuery();\n  },\n  methods: {\n    // 分页查询\n    pageQuery: function pageQuery() {\n      var _this = this;\n\n      // 准备请求参数\n      var params = {\n        name: this.name,\n        page: this.page,\n        pageSize: this.pageSize\n      }; // 调用 Ajax 请求\n\n      (0, _employee.getEmployeelist)(params).then(function (res) {\n        if (res.data.code === 1) {\n          _this.total = res.data.data.total; // res.data：后端返回数据中的 data；res.data.data：模型数据\n\n          _this.records = res.data.data.records;\n        }\n      }).catch(function (err) {\n        _this.$message.error('请求出错了：' + err.message);\n      });\n    },\n    // pageSize 发生变化时触发\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.pageQuery();\n    },\n    // page 发生变化时触发\n    handleCurrentChange: function handleCurrentChange(page) {\n      this.page = page;\n      this.pageQuery();\n    },\n    // 启用禁用员工账号\n    handleStarEorStop: function handleStarEorStop(row) {\n      var _this2 = this;\n\n      if (row.username === 'admin') {\n        // 冗余校验，确保安全\n        this.$message.error('admin 为系统的管理员账号，禁止修改账号状态！');\n        return;\n      } // 弹出确认提示框\n\n\n      this.$confirm('确认要修改当前员工账号状态吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var p = {\n          id: row.id,\n          status: !row.status ? 1 : 0 // 0 是 true，1 是 false\n\n        };\n        (0, _employee.enableOrDisableEmployee)(p).then(function (res) {\n          if (res.data.code === 1) {\n            _this2.$message.success('员工的账号状态修改成功！');\n\n            _this2.pageQuery();\n          }\n        });\n      }).catch(function () {\n        _this2.$message({\n          type: 'info',\n          message: '已取消修改'\n        });\n      });\n    },\n    // 跳转到新增员工页面（组件）\n    handleAddEmp: function handleAddEmp() {\n      // 路由跳转，跳转到新增员工组件\n      this.$router.push('/employee/add'); // 简写\n    },\n    // 跳转到修改员工页面（组件）\n    handleUpdateEmp: function handleUpdateEmp(row) {\n      // 跳转到修改页面，通过地址栏传递参数\n      this.$router.push({\n        path: '/employee/add',\n        query: {\n          id: row.id\n        } // 修改员工路由地址仅比新增员工路由地址多一个 id\n\n      });\n    },\n    // 删除员工\n    handleDelete: function handleDelete(row) {\n      var _this3 = this;\n\n      if (row.username === 'admin') {\n        // 冗余校验，确保安全\n        this.$message.error('admin 为系统的管理员账号，禁止删除账户！');\n        return;\n      } // 弹出确认提示框\n\n\n      this.$confirm('确认要删除当前员工吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        (0, _employee.deleteEmployee)(row.id).then(function (res) {\n          if (res.data.code === 1) {\n            _this3.$message.success('员工账户删除成功！');\n\n            _this3.pageQuery();\n          } else {\n            _this3.$message.error(res.data.msg);\n          }\n        });\n      }).catch(function () {\n        _this3.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DevelopmentTools\\Vue_WorkPlace\\VinoHouse-vue-ts\\src\\views\\employee\\index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";;;;;;;;;AAyFA;;eAEe;AACb,EAAA,IAAI,EAAE,oBADO;AAEb;AACA,EAAA,IAHa,kBAGT;AACF,WAAO;AACL,MAAA,IAAI,EAAE,EADD;AAEL,MAAA,IAAI,EAAE,CAFD;AAGL,MAAA,QAAQ,EAAE,EAHL;AAIL,MAAA,KAAK,EAAE,CAJF;AAKL,MAAA,OAAO,EAAE,EALJ;AAML,MAAA,WAAW,EAAE,EANR,CAMY;;AANZ,KAAP;AAQD,GAZY;AAab,EAAA,OAba,qBAaN;AACL;AACA,QAAM,IAAI,GAAG,YAAY,CAAC,OAAb,CAAqB,aAArB,CAAb;AACA,SAAK,WAAL,GAAmB,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAH,GAAsB,EAA7C;AACA,SAAK,SAAL;AACD,GAlBY;AAmBb,EAAA,OAAO,EAAE;AACP;AACA,IAAA,SAFO,uBAEE;AAAA;;AACP;AACA,UAAM,MAAM,GAAG;AAAC,QAAA,IAAI,EAAE,KAAK,IAAZ;AAAkB,QAAA,IAAI,EAAE,KAAK,IAA7B;AAAmC,QAAA,QAAQ,EAAE,KAAK;AAAlD,OAAf,CAFO,CAGP;;AACA,qCAAgB,MAAhB,EAAwB,IAAxB,CAA6B,UAAA,GAAG,EAAG;AACjC,YAAG,GAAG,CAAC,IAAJ,CAAS,IAAT,KAAkB,CAArB,EAAuB;AACrB,UAAA,KAAI,CAAC,KAAL,GAAa,GAAG,CAAC,IAAJ,CAAS,IAAT,CAAc,KAA3B,CADqB,CACa;;AAClC,UAAA,KAAI,CAAC,OAAL,GAAe,GAAG,CAAC,IAAJ,CAAS,IAAT,CAAc,OAA7B;AACD;AACF,OALD,EAKG,KALH,CAKS,UAAA,GAAG,EAAG;AACb,QAAA,KAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,WAAW,GAAG,CAAC,OAAnC;AACD,OAPD;AAQD,KAdM;AAeP;AACA,IAAA,gBAhBO,4BAgBU,QAhBV,EAgBkB;AACvB,WAAK,QAAL,GAAgB,QAAhB;AACA,WAAK,SAAL;AACD,KAnBM;AAoBP;AACA,IAAA,mBArBO,+BAqBa,IArBb,EAqBiB;AACtB,WAAK,IAAL,GAAY,IAAZ;AACA,WAAK,SAAL;AACD,KAxBM;AAyBP;AACA,IAAA,iBA1BO,6BA0BW,GA1BX,EA0Bc;AAAA;;AACnB,UAAG,GAAG,CAAC,QAAJ,KAAgB,OAAnB,EAA4B;AAAE;AAC5B,aAAK,QAAL,CAAc,KAAd,CAAoB,2BAApB;AACA;AACD,OAJkB,CAKnB;;;AACA,WAAK,QAAL,CAAc,iBAAd,EAAiC,IAAjC,EAAuC;AACrC,QAAA,iBAAiB,EAAE,IADkB;AAErC,QAAA,gBAAgB,EAAE,IAFmB;AAGrC,QAAA,IAAI,EAAE;AAH+B,OAAvC,EAIG,IAJH,CAIQ,YAAK;AACX,YAAM,CAAC,GAAG;AACR,UAAA,EAAE,EAAE,GAAG,CAAC,EADA;AAER,UAAA,MAAM,EAAE,CAAC,GAAG,CAAC,MAAL,GAAc,CAAd,GAAiB,CAFjB,CAEoB;;AAFpB,SAAV;AAIA,+CAAwB,CAAxB,EAA2B,IAA3B,CAAgC,UAAA,GAAG,EAAG;AACpC,cAAG,GAAG,CAAC,IAAJ,CAAS,IAAT,KAAkB,CAArB,EAAuB;AACrB,YAAA,MAAI,CAAC,QAAL,CAAc,OAAd,CAAsB,cAAtB;;AACA,YAAA,MAAI,CAAC,SAAL;AACD;AACF,SALD;AAMD,OAfD,EAeG,KAfH,CAeS,YAAK;AACZ,QAAA,MAAI,CAAC,QAAL,CAAc;AACZ,UAAA,IAAI,EAAE,MADM;AAEZ,UAAA,OAAO,EAAE;AAFG,SAAd;AAID,OApBD;AAqBD,KArDM;AAsDP;AACA,IAAA,YAvDO,0BAuDK;AACV;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB,eAAlB,EAFU,CAE0B;AACrC,KA1DM;AA2DP;AACA,IAAA,eA5DO,2BA4DS,GA5DT,EA4DY;AACjB;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB;AAChB,QAAA,IAAI,EAAE,eADU;AAEhB,QAAA,KAAK,EAAE;AAAC,UAAA,EAAE,EAAE,GAAG,CAAC;AAAT,SAFS,CAEK;;AAFL,OAAlB;AAID,KAlEM;AAmEP;AACA,IAAA,YApEO,wBAoEM,GApEN,EAoES;AAAA;;AACd,UAAG,GAAG,CAAC,QAAJ,KAAgB,OAAnB,EAA4B;AAAE;AAC5B,aAAK,QAAL,CAAc,KAAd,CAAoB,yBAApB;AACA;AACD,OAJa,CAKd;;;AACA,WAAK,QAAL,CAAc,aAAd,EAA6B,IAA7B,EAAmC;AACjC,QAAA,iBAAiB,EAAE,IADc;AAEjC,QAAA,gBAAgB,EAAE,IAFe;AAGjC,QAAA,IAAI,EAAE;AAH2B,OAAnC,EAIG,IAJH,CAIQ,YAAK;AACX,sCAAe,GAAG,CAAC,EAAnB,EAAuB,IAAvB,CAA4B,UAAA,GAAG,EAAG;AAChC,cAAG,GAAG,CAAC,IAAJ,CAAS,IAAT,KAAkB,CAArB,EAAuB;AACrB,YAAA,MAAI,CAAC,QAAL,CAAc,OAAd,CAAsB,WAAtB;;AACA,YAAA,MAAI,CAAC,SAAL;AACD,WAHD,MAGO;AACL,YAAA,MAAI,CAAC,QAAL,CAAc,KAAd,CAAoB,GAAG,CAAC,IAAJ,CAAS,GAA7B;AACD;AACF,SAPD;AAQD,OAbD,EAaG,KAbH,CAaS,YAAK;AACZ,QAAA,MAAI,CAAC,QAAL,CAAc;AACZ,UAAA,IAAI,EAAE,MADM;AAEZ,UAAA,OAAO,EAAE;AAFG,SAAd;AAID,OAlBD;AAmBD;AA7FM;AAnBI,C","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { getEmployeelist, enableOrDisableEmployee, deleteEmployee } from '@/api/employee'\r\n\r\nexport default {\r\n  name: \"EmployeeSearchForm\",\r\n  // 模型数据\r\n  data() {\r\n    return {\r\n      name: '',        // 员工姓名，对应 v-model=\"name\"（双向绑定）\r\n      page: 1,         // 页码\r\n      pageSize: 10,    // 每页记录数\r\n      total: 0,        // 总记录数\r\n      records: [],     // 当前页要展示的数据集合\r\n      currentUser: {}  // 存储当前登录用户\r\n    }\r\n  },\r\n  created() {  // 自动执行\r\n    // 从 localStorage 获取当前用户\r\n    const user = localStorage.getItem('currentUser');\r\n    this.currentUser = user ? JSON.parse(user) : {};\r\n    this.pageQuery()\r\n  },\r\n  methods: {\r\n    // 分页查询\r\n    pageQuery() {\r\n      // 准备请求参数\r\n      const params = {name: this.name, page: this.page, pageSize: this.pageSize}\r\n      // 调用 Ajax 请求\r\n      getEmployeelist(params).then(res => {\r\n        if(res.data.code === 1){\r\n          this.total = res.data.data.total  // res.data：后端返回数据中的 data；res.data.data：模型数据\r\n          this.records = res.data.data.records\r\n        }\r\n      }).catch(err => {\r\n        this.$message.error('请求出错了：' + err.message)\r\n      })\r\n    },\r\n    // pageSize 发生变化时触发\r\n    handleSizeChange(pageSize){\r\n      this.pageSize = pageSize\r\n      this.pageQuery()\r\n    },\r\n    // page 发生变化时触发\r\n    handleCurrentChange(page){\r\n      this.page = page\r\n      this.pageQuery()\r\n    },\r\n    // 启用禁用员工账号\r\n    handleStarEorStop(row){  // row：表格每行的数据\r\n      if(row.username ==='admin') { // 冗余校验，确保安全\r\n        this.$message.error('admin 为系统的管理员账号，禁止修改账号状态！')\r\n        return\r\n      }\r\n      // 弹出确认提示框\r\n      this.$confirm('确认要修改当前员工账号状态吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        const p = {\r\n          id: row.id,\r\n          status: !row.status ? 1: 0  // 0 是 true，1 是 false\r\n        }\r\n        enableOrDisableEmployee(p).then(res => {\r\n          if(res.data.code === 1){\r\n            this.$message.success('员工的账号状态修改成功！')\r\n            this.pageQuery()\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消修改'\r\n        });\r\n      });\r\n    },\r\n    // 跳转到新增员工页面（组件）\r\n    handleAddEmp(){\r\n      // 路由跳转，跳转到新增员工组件\r\n      this.$router.push('/employee/add')  // 简写\r\n    },\r\n    // 跳转到修改员工页面（组件）\r\n    handleUpdateEmp(row){\r\n      // 跳转到修改页面，通过地址栏传递参数\r\n      this.$router.push({\r\n        path: '/employee/add',  // 修改 ⊂ 新增\r\n        query: {id: row.id}  // 修改员工路由地址仅比新增员工路由地址多一个 id\r\n      })\r\n    },\r\n    // 删除员工\r\n    handleDelete(row){\r\n      if(row.username ==='admin') { // 冗余校验，确保安全\r\n        this.$message.error('admin 为系统的管理员账号，禁止删除账户！')\r\n        return\r\n      }\r\n      // 弹出确认提示框\r\n      this.$confirm('确认要删除当前员工吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteEmployee(row.id).then(res => {\r\n          if(res.data.code === 1){\r\n            this.$message.success('员工账户删除成功！')\r\n            this.pageQuery()\r\n          } else {\r\n            this.$message.error(res.data.msg)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n    },\r\n  }\r\n}\r\n"],"sourceRoot":""}]}